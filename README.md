# サービス名: StockMate
[![Image from Gyazo](https://i.gyazo.com/7c4ae9f5eeafaf40df2bc46f2b7bc021.jpg)](https://gyazo.com/7c4ae9f5eeafaf40df2bc46f2b7bc021)

# 目次
- [サービス概要](#サービス概要)
- [サービスURL](#サービスurl)
- [開発背景](#開発背景)
- [サービス紹介](#サービス紹介)
- [通知タイミングの計算方法](#通知タイミングの計算方法)
- [使用技術](#使用技術)
- [ER図](#er図)


## サービス概要
登録された日用品の消耗具合を予測して、減ってきたタイミングで通知してくれます。
通知をLINE履歴で確認できるので、「何買えばいいんだっけ？」とわからなくなることを防止することができます。


## サービスURL
https://stockmate.dev


## 開発背景
一人暮らしをしていると、以下のようなシチュエーションがありました。

*普段使っているシャンプーの残量が少なくなってきていることに気付き、明日の仕事帰りにドラッグストアに寄ることにした。
しかし次の日、帰宅後に買って帰ることを忘れていたことを、シャワーを浴びてから気付いた。
休日になり、ドラッグストアで在庫を購入し帰宅したところ、今度は食器用洗剤の量が少なくなっていることに気づいた。*

このように***日用品の買い忘れ***や***次はいつ、どの日用品が切れそうか***をアプリから管理できたら便利だなと考え、制作を決めました。


# サービス紹介
### 新規作成・編集
[![Image from Gyazo](https://i.gyazo.com/d6d1bcce33b92a95273aaba79f154978.png)](https://gyazo.com/d6d1bcce33b92a95273aaba79f154978)

### 詳細ページ
[![Image from Gyazo](https://i.gyazo.com/23fd9412c04772f32265aafda93fc518.png)](https://gyazo.com/23fd9412c04772f32265aafda93fc518)
- 一覧ページのカテゴリーアイコンをタップすると確認できます

### 通知予定日の編集
[![Image from Gyazo](https://i.gyazo.com/63eccb049f39540b59ffd2fb9ef74fef.png)](https://gyazo.com/63eccb049f39540b59ffd2fb9ef74fef)

### LINE画面での操作
[![Image from Gyazo](https://i.gyazo.com/c9a4e87a9cb61580c04477fd6183cd9a.png)](https://gyazo.com/c9a4e87a9cb61580c04477fd6183cd9a)


# 通知タイミングの計算方法
通知タイミングは、以下の計算式から条件を満たすまでループ処理で算出します。  
算出された日時に通知を送ります。  

### 計算式 ###

___[通知タイミング(何日後か) = (内包量 - 1日の推定消費量) <= 内包量 * 1/3]___

**1日の推定消費量** = ( (1回の平均使用量 or メーカー等が推奨する１回の適量) * 1日の推定使用回数 * 使用日数 )  
**内包量**: ユーザーが入力します。
**1日の推定使用回数**: ユーザーが入力した「一週間の使用回数」 / 7.0 の小数点第二位までの値を使用します。

#### 解説 ####

**1日の平均使用量**: インターネットで検索した、メーカーやまとめサイトなどから一人暮らしの平均消費量を１日あたりに換算して採用します。  
**メーカー等が推奨する１回の適量**: ユーザーごとの消費量に大きく差がある日用品（化粧品）などはこちらを元に計算します。  
**１日の推定使用回数**: ユーザーは一週間に何回ぐらい使用するかを入力します。そうすることで毎日使用しない日用品に対する計算の精度を向上させました。
**使用日数**: 計算時にループ処理で+1ずつ、条件を満たすまで日数を追加してきます。

また、ユーザーが任意の日用品等を登録できるようにその他というカテゴリーを設けていますが、こちらは計算を行わずに自動的に二週間後に通知となっています。


# 使用技術
| カテゴリ       | 技術 |
|--------------|-----------------------|
| バックエンド  | Ruby on Rails 7.1.4, Ruby 3.2.2 |
| フロントエンド | JavaScript, Stimulus |
| CSSフレームワーク | TailwindCSS, DaisyUI |
| 環境構築     | Docker |
| CI/CD       | GitHub Actions |
| インフラ     | Heroku, Cloudflare |
| データベース | MySQL |
| 認証        | Devise |
| API         | LINE Messaging API, LINE Developers |


# ER図
[![Image from Gyazo](https://i.gyazo.com/1c93de0eb2549a3c930d66a3f4ae99ea.png)](https://gyazo.com/1c93de0eb2549a3c930d66a3f4ae99ea)

